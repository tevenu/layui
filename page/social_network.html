<div class="layuimini-container layuimini-page-anim">
    <div class="layuimini-main">
        <blockquote class="layui-elem-quote layui-text" style="margin-bottom: 1px; text-align: center; color: rgb(37, 50, 50);">
            用户的社交网络图
        </blockquote>
        <div id="echarts-relation" style="width: 100%;height:950px"></div>
    </div>
</div>
<script>
    layui.use(['echarts'], function () {
        var $ = layui.jquery,
            echarts = layui.echarts
            
        var myChart = echarts.init(document.getElementById('echarts-relation'), 'walden');
        var username = localStorage.getItem('username');  // 获取用户名
        var network_file = username + `_network.json`
        var option;
        $.getJSON(
        network_file,
        function (json) {
            option = {
                animationDurationUpdate: 1500,
                animationEasingUpdate: 'quinticInOut',
                series: [
                {
                    type: 'graph',
                    layout: 'none',
                    // progressiveThreshold: 700,
                    data: json.nodes.map(function (node) {
                    return {
                        x: node.x,
                        y: node.y,
                        id: node.id,
                        name: node.label,
                        symbolSize: node.size,
                        itemStyle: {
                        color: node.color
                        }
                    };
                    }),
                    edges: json.edges.map(function (edge) {
                    return {
                        source: edge.sourceID,
                        target: edge.targetID
                    };
                    }),
                    emphasis: {
                    focus: 'adjacency',
                    label: {
                        position: 'right',
                        show: true
                    }
                    },
                    roam: true,
                    lineStyle: {
                    width: 0.5,
                    curveness: 0.3,
                    opacity: 0.7
                    }
                }
                ]
            }
            
            console.log(option)
            myChart.hideLoading();
            myChart.setOption(
            (option),
            true
            );
        }
        );
    });
</script>   