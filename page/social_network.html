<div class="layuimini-container layuimini-page-anim" style="display: flex; height: 100%; width: 100%; overflow: hidden;">
    <div class="layuimini-main" style="display: flex; height: 100%; width: 100%; flex-direction: column;">
        <div id="echarts-relation" style="width: 100%; height:100%;"></div>
    </div>
</div>
<script>
    layui.use(['echarts'], function () {
        var $ = layui.jquery,
            echarts = layui.echarts
            
        var myChart = echarts.init(document.getElementById('echarts-relation'), 'walden');
        var username = localStorage.getItem('username');  // 获取用户名
        var network_file = username + `_network.json`
        var option;
        $.getJSON(
        network_file,
        function (json) {
            option = {
                animationDurationUpdate: 1500,
                animationEasingUpdate: 'quinticInOut',
                legend: {  
                    
                    orient: 'vertical',
                    left: 'left',
                    data: [  
                        {name: '用户', icon: 'circle'},  
                        {name: '具有社交关系', icon: 'line'}  
                    ],  
                    textStyle: {  
                        fontSize: 12  
                    } 
                },  
                series: [
                {
                    type: 'graph',
                    layout: 'none',
                    // progressiveThreshold: 700,
                    data: json.nodes.map(function (node) {
                    return {
                        x: node.x,
                        y: node.y,
                        id: node.id,
                        name: node.label,
                        symbolSize: node.size,
                        itemStyle: {
                        color: node.color
                        }
                    };
                    }),
                    edges: json.edges.map(function (edge) {
                    return {
                        source: edge.sourceID,
                        target: edge.targetID
                    };
                    }),
                    emphasis: {
                    focus: 'adjacency',
                    label: {
                        position: 'right',
                        show: true
                    }
                    },
                    roam: false,
                    lineStyle: {
                    width: 0.5,
                    curveness: 0.3,
                    opacity: 0.7
                    }
                }
                ]
            }
            
            console.log(option)
            myChart.hideLoading();
            myChart.setOption(
            (option),
            true
            );
        });
    });
</script>